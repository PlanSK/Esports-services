{% extends 'salary/dashboard.html' %}
{% load humanize %}
{% load salary_tags %}
{% block data %}
<div class="col-md-12 border">
  <table class="table table-dark table-hover">
    <thead class="text-warning text-center verysmall">
      <tr>
        <th scope="col">Статус</th>
        <th scope="col">Дата</th>
        <th scope="col">Администратор кассы</th>
        <th scope="col">Администратор зала</th>
        <th scope="col">Общая выручка</th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody class="text-center verysmall">
      {% for workshift in object_list %}
      <tr>
        <td>
          {% if workshift.is_verified %}
          <i class="bi bi-check2-circle" style="color: green;"></i>
          Проверено 
          {% else %}
          <i class="bi bi-stopwatch-fill" style="color: yellow;"></i>
          Ожидает проверки
          {% endif %}
        </td>
        <td>{{ workshift.shift_date }}</td>
        <td><a href="{% url 'staff_user_view' request_user=workshift.cash_admin year=workshift.shift_date.year month=workshift.shift_date.month %}" class="link-light">{{ workshift.cash_admin.get_full_name }}</a></td>
        <td><a href="{% url 'staff_user_view' request_user=workshift.hall_admin year=workshift.shift_date.year month=workshift.shift_date.month %}" class="link-light">{{ workshift.hall_admin.get_full_name }}</a></td>
        <td>{{ workshift.get_summary_revenue }}</td>
        <td><a href="{% url 'detail_workshift' slug=workshift.slug %}?next={{ request.path }}" class="link-primary">Подробнее...</a></td>
        <td>
          <a title="Внести изменения" class="btn btn-secondary verysmall" href="{% url 'staff_edit_workshift' workshift.slug %}?next={{ request.path }}">
            <i class="bi bi-pencil-square" style="color: yellow;"></i>
            Внести изменения
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot class="text-center verysmall text-white">
      <tr>
        <td colspan="8">
          {% if only_verified %}
          <div class="row">
            <div class="col"><a href="{% url 'workshifts_view_all' all='all' %}" class="link-primary">Показать все</a></div>
          </div>
          <div class="row">
              <div class="col"><hr><a class="btn btn-primary verysmall" href="{% url 'add_workshift' %}?next={{ request.path }}"><i class="bi bi-plus-circle"></i> Добавить смену</a></div>
          </div>
          {% endif %}
          {% if is_paginated %}
          <div class="row text-center">
            <div class="col">
                  {% if page_obj.has_previous %}
                      <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary verysmall">Назад</a>
                  {% endif %}
            </div>
            <div class="col">
              {% for page_num in paginator.page_range %}
                {% if page_num == page_obj.number %}
                  <span class="btn btn-success verysmall" >{{ page_obj.number }}</span>
                {% else %}
                  <a href="?page={{ page_num }}" class="btn btn-secondary verysmall">{{ page_num }}</a>
                {% endif %}
              {% endfor %}
            </div>
            <div class="col">
                  {% if page_obj.has_next %}
                      <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary verysmall">Следующая</a>
                  {% endif %}
            </div>
          </div>
          {% endif %}
        </td>
      </tr>
    </tfoot>
  </table>
</div>
{% endblock %}