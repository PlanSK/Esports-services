{% extends 'salary/dashboard.html' %}
{% load bootstrap_icons %}
{% load humanize %}
{% load salary_tags %}
{% block data %}
<div class="col-md-12 border">
  <table class="table table-dark table-hover">
    <thead class="text-warning text-center verysmall">
      <tr>
        <th scope="col">Статус</th>
        <th scope="col">Дата</th>
        <th scope="col">Администратор кассы</th>
        <th scope="col">Администратор зала</th>
        <th scope="col">Общая выручка</th>
        <th scope="col">Действия</th>
      </tr>
    </thead>
    <tbody class="text-center verysmall">
      {% for workshift in object_list %}
      <tr>
        <td>
          {% if workshift.is_verified %}
            {% bs_icon 'check2-circle' color='green' %} Проверено 
          {% else %}
            {% bs_icon 'stopwatch-fill' color='yellow' %} Ожидает проверки
          {% endif %}
        </td>
        <td>{{ workshift.shift_date }}</td>
        <td><a href="{% url 'staff_user_view' request_user=workshift.cash_admin year=workshift.shift_date.year month=workshift.shift_date.month %}" class="link-light">{{ workshift.cash_admin.get_full_name }}</a></td>
        <td><a href="{% url 'staff_user_view' request_user=workshift.hall_admin year=workshift.shift_date.year month=workshift.shift_date.month %}" class="link-light">{{ workshift.hall_admin.get_full_name }}</a></td>
        <td>{{ workshift.get_summary_revenue }}</td>
        <td>
          <a title="Внести изменения" class="btn btn-secondary verysmall" href="{% url 'staff_edit_workshift' workshift.slug %}">
            {% bs_icon 'pencil-square' color='yellow' %}
          </a>
          <a title="Удалить смену" class="btn btn-secondary verysmall" href="{% url 'delete_workshift' workshift.slug %}">
            {% bs_icon 'x-square' color='red' %}
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot class="text-center verysmall text-white">
      <tr>
        <td colspan="8">
          {% if only_verified %}
          <div class="row">
            <a href="{% url 'workshifts_view_all' all='all' %}" class="link-primary">Показать все</a>
          </div>
          {% endif %}
          {% if is_paginated %}
          <div class="row text-center">
            <div class="col">
                  {% if page_obj.has_previous %}
                      <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary verysmall">Назад</a>
                  {% endif %}
            </div>
            <div class="col">
              {% for page_num in paginator.page_range %}
                {% if page_num == page_obj.number %}
                  <span class="btn btn-success verysmall" >{{ page_obj.number }}</span>
                {% else %}
                  <a href="?page={{ page_num }}" class="btn btn-secondary verysmall">{{ page_num }}</a>
                {% endif %}
              {% endfor %}
            </div>
            <div class="col">
                  {% if page_obj.has_next %}
                      <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary verysmall">Следующая</a>
                  {% endif %}
            </div>
          </div>
          {% endif %}
        </td>
      </tr>
    </tfoot>
  </table>
</div>
{% endblock %}