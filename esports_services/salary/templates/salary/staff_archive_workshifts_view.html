{% extends 'salary/dashboard.html' %}
{% load humanize %}
{% load salary_tags %}
{% block data %}
<div class="col table-responsive border rounded m-3">
  <table class="table table-dark">
    <thead class="text-warning text-center verysmall">
      <tr>
        <th scope="col">Статус</th>
        <th scope="col">Дата</th>
        <th scope="col">Администратор кассы</th>
        <th scope="col">Администратор зала</th>
        <th scope="col">Общая выручка</th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody class="text-center verysmall">
      {% for workshift in object_list %}
      {% if workshift.is_verified %}
      <tr class>
        <td>
          <i class="fa-solid fa-calendar-check" style="color: green;"></i>
      {% else %}
      <tr class="table-primary">
        <td>
          <i class="fa-solid fa-hourglass-end fa-beat" style="color: rgb(47, 0, 255);"></i>
      {% endif %}
        </td>
        <td>{{ workshift.shift_date }}</td>
      {% if workshift.is_verified %}
        <td><a href="{% url 'staff_user_view' request_user=workshift.cash_admin year=workshift.shift_date.year month=workshift.shift_date.month %}" class="link-light">{{ workshift.cash_admin.get_full_name }}</a></td>
        <td><a href="{% url 'staff_user_view' request_user=workshift.hall_admin year=workshift.shift_date.year month=workshift.shift_date.month %}" class="link-light">{{ workshift.hall_admin.get_full_name }}</a></td>
      {% else %}
      <td>{{ workshift.cash_admin.get_full_name }}</td>
      <td>{{ workshift.hall_admin.get_full_name }}</td>
      {% endif %}
        <td>{{ workshift.get_summary_revenue }}</td>
        <td><a href="{{ workshift.get_absolute_url }}?next={{ request.path }}" class="link-primary">Подробнее...</a></td>
        <td>
          <a title="Внести изменения" class="btn btn-secondary verysmall" href="{% url 'staff_edit_workshift' workshift.slug %}?next={{ request.path }}">
            <i class="bi bi-pencil-square" style="color: yellow;"></i>
            Внести изменения
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
    <tfoot class="text-center verysmall text-white">
      <tr>
        <td></td>
        <td>{{ object_list.count }}</td>
        <td colspan="2"></td>
        <td>
          {{ summary_revenue }}
        </td>
        <td colspan="2"></td>
      </tr>
    </tfoot>
  </table>
</div>
{% endblock %}